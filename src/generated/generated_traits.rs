// Auto-generated traits and version registry module.
// This file is generated by `build.rs` - do not edit manually.

use crate::hbc::instructions::versions::{HbcVersion, VersionRegistry};
use once_cell::sync::Lazy;
use std::collections::HashMap;

#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash)]
pub enum InstructionCategory {
    Other,
    Debug,
    Bitwise,
    ConstantLoad,
    Comparison,
    Logical,
    Variable,
    Arithmetic,
    PropertyAccess,
    TypeConversion,
    Jump,
    Environment,
    Return,
    Exception,
    ObjectCreation,
    Call,
}

pub fn get_category_from_name(instruction_name: &str) -> InstructionCategory {
    match instruction_name {
        "IteratorNext" => InstructionCategory::Logical,
        "Sub32" => InstructionCategory::Arithmetic,
        "ResumeGenerator" => InstructionCategory::Logical,
        "NewObjectWithBufferLong" => InstructionCategory::ObjectCreation,
        "IteratorClose" => InstructionCategory::Logical,
        "JLessEqual" => InstructionCategory::Jump,
        "JNotGreater" => InstructionCategory::Jump,
        "LoadConstBigInt" => InstructionCategory::ConstantLoad,
        "NewObjectWithBuffer" => InstructionCategory::ObjectCreation,
        "Mov" => InstructionCategory::Variable,
        "GetNextPName" => InstructionCategory::PropertyAccess,
        "LoadConstUInt8" => InstructionCategory::ConstantLoad,
        "JmpFalse" => InstructionCategory::Jump,
        "JGreaterNLong" => InstructionCategory::Jump,
        "JGreaterEqualLong" => InstructionCategory::Jump,
        "JStrictEqualLong" => InstructionCategory::Jump,
        "JNotLessEqual" => InstructionCategory::Jump,
        "JLessNLong" => InstructionCategory::Jump,
        "JNotGreaterEqual" => InstructionCategory::Jump,
        "DirectEval" => InstructionCategory::Other,
        "NewObjectWithParent" => InstructionCategory::ObjectCreation,
        "PutOwnByVal" => InstructionCategory::PropertyAccess,
        "DelByIdLong" => InstructionCategory::PropertyAccess,
        "JmpUndefinedLong" => InstructionCategory::Jump,
        "JNotGreaterNLong" => InstructionCategory::Jump,
        "StrictNeq" => InstructionCategory::Comparison,
        "PutByVal" => InstructionCategory::PropertyAccess,
        "Call" => InstructionCategory::Call,
        "JStrictNotEqualLong" => InstructionCategory::Jump,
        "JmpTrueLong" => InstructionCategory::Jump,
        "CreateGeneratorClosureLongIndex" => InstructionCategory::Logical,
        "CompleteGenerator" => InstructionCategory::Logical,
        "SaveGeneratorLong" => InstructionCategory::Logical,
        "JGreaterN" => InstructionCategory::Jump,
        "GreaterEq" => InstructionCategory::Comparison,
        "LoadThisNS" => InstructionCategory::Variable,
        "LoadConstEmpty" => InstructionCategory::ConstantLoad,
        "Loadu16" => InstructionCategory::Variable,
        "Loadu32" => InstructionCategory::Variable,
        "JNotEqualLong" => InstructionCategory::Jump,
        "Loadi8" => InstructionCategory::Variable,
        "Divu32" => InstructionCategory::Arithmetic,
        "DelByVal" => InstructionCategory::PropertyAccess,
        "Loadi16" => InstructionCategory::Variable,
        "ConstructLong" => InstructionCategory::Call,
        "BitAnd" => InstructionCategory::Bitwise,
        "Div" => InstructionCategory::Arithmetic,
        "Store8" => InstructionCategory::Logical,
        "GetBuiltinClosure" => InstructionCategory::PropertyAccess,
        "CreateGeneratorClosure" => InstructionCategory::Logical,
        "Not" => InstructionCategory::Logical,
        "Mod" => InstructionCategory::Arithmetic,
        "NewArrayWithBuffer" => InstructionCategory::ObjectCreation,
        "SwitchImm" => InstructionCategory::Jump,
        "DivN" => InstructionCategory::Arithmetic,
        "CreateGeneratorLongIndex" => InstructionCategory::Logical,
        "Divi32" => InstructionCategory::Arithmetic,
        "PutNewOwnById" => InstructionCategory::PropertyAccess,
        "GetPNameList" => InstructionCategory::PropertyAccess,
        "LoadConstDouble" => InstructionCategory::ConstantLoad,
        "Eq" => InstructionCategory::Comparison,
        "BitXor" => InstructionCategory::Bitwise,
        "DeclareGlobalVar" => InstructionCategory::Environment,
        "GetById" => InstructionCategory::PropertyAccess,
        "Call4" => InstructionCategory::Call,
        "AddEmptyString" => InstructionCategory::Arithmetic,
        "ReifyArguments" => InstructionCategory::Other,
        "JNotLessEqualLong" => InstructionCategory::Jump,
        "JNotGreaterEqualNLong" => InstructionCategory::Jump,
        "AsyncBreakCheck" => InstructionCategory::Other,
        "CreateClosure" => InstructionCategory::Other,
        "GetByIdLong" => InstructionCategory::PropertyAccess,
        "GetArgumentsLength" => InstructionCategory::PropertyAccess,
        "SubN" => InstructionCategory::Arithmetic,
        "JStrictNotEqual" => InstructionCategory::Jump,
        "JNotGreaterN" => InstructionCategory::Jump,
        "RShift" => InstructionCategory::Bitwise,
        "Store16" => InstructionCategory::Logical,
        "JNotLessNLong" => InstructionCategory::Jump,
        "MulN" => InstructionCategory::Arithmetic,
        "PutNewOwnByIdLong" => InstructionCategory::PropertyAccess,
        "Unreachable" => InstructionCategory::Other,
        "LoadConstFalse" => InstructionCategory::ConstantLoad,
        "StrictEq" => InstructionCategory::Comparison,
        "LShift" => InstructionCategory::Bitwise,
        "Negate" => InstructionCategory::Arithmetic,
        "GetByIdShort" => InstructionCategory::PropertyAccess,
        "SelectObject" => InstructionCategory::TypeConversion,
        "StoreNPToEnvironment" => InstructionCategory::Logical,
        "CreateClosureLongIndex" => InstructionCategory::Comparison,
        "Jmp" => InstructionCategory::Jump,
        "IsIn" => InstructionCategory::Comparison,
        "CallLong" => InstructionCategory::Call,
        "Throw" => InstructionCategory::Exception,
        "DelById" => InstructionCategory::PropertyAccess,
        "LoadConstUndefined" => InstructionCategory::ConstantLoad,
        "JLessN" => InstructionCategory::Jump,
        "JStrictEqual" => InstructionCategory::Jump,
        "IteratorBegin" => InstructionCategory::Logical,
        "JLess" => InstructionCategory::Jump,
        "LessEq" => InstructionCategory::Comparison,
        "JEqualLong" => InstructionCategory::Jump,
        "NewArray" => InstructionCategory::ObjectCreation,
        "Mul32" => InstructionCategory::Arithmetic,
        "StoreToEnvironmentL" => InstructionCategory::Return,
        "StoreToEnvironment" => InstructionCategory::Return,
        "CallBuiltin" => InstructionCategory::Call,
        "ToInt32" => InstructionCategory::Comparison,
        "JNotLess" => InstructionCategory::Jump,
        "JmpUndefined" => InstructionCategory::Jump,
        "PutOwnByIndex" => InstructionCategory::PropertyAccess,
        "LoadConstInt" => InstructionCategory::ConstantLoad,
        "TryPutByIdLong" => InstructionCategory::PropertyAccess,
        "Less" => InstructionCategory::Comparison,
        "AddN" => InstructionCategory::Arithmetic,
        "NewObject" => InstructionCategory::ObjectCreation,
        "InstanceOf" => InstructionCategory::Comparison,
        "PutOwnByIndexL" => InstructionCategory::PropertyAccess,
        "TryPutById" => InstructionCategory::PropertyAccess,
        "DebuggerCheckBreak" => InstructionCategory::Debug,
        "LoadParamLong" => InstructionCategory::Variable,
        "GetEnvironment" => InstructionCategory::PropertyAccess,
        "Greater" => InstructionCategory::Comparison,
        "CreateRegExp" => InstructionCategory::Other,
        "StartGenerator" => InstructionCategory::Logical,
        "Inc" => InstructionCategory::Comparison,
        "JNotEqual" => InstructionCategory::Jump,
        "JmpTrue" => InstructionCategory::Jump,
        "ProfilePoint" => InstructionCategory::Comparison,
        "Add32" => InstructionCategory::Arithmetic,
        "JmpLong" => InstructionCategory::Jump,
        "ToNumeric" => InstructionCategory::TypeConversion,
        "LoadConstNull" => InstructionCategory::ConstantLoad,
        "JLessEqualLong" => InstructionCategory::Jump,
        "LoadConstTrue" => InstructionCategory::ConstantLoad,
        "TryGetByIdLong" => InstructionCategory::PropertyAccess,
        "PutNewOwnNEById" => InstructionCategory::PropertyAccess,
        "NewArrayWithBufferLong" => InstructionCategory::ObjectCreation,
        "Mul" => InstructionCategory::Arithmetic,
        "LoadParam" => InstructionCategory::Variable,
        "JLessLong" => InstructionCategory::Jump,
        "SaveGenerator" => InstructionCategory::Logical,
        "CreateThis" => InstructionCategory::Other,
        "Dec" => InstructionCategory::Other,
        "Call3" => InstructionCategory::Call,
        "JEqual" => InstructionCategory::Jump,
        "LoadConstZero" => InstructionCategory::ConstantLoad,
        "BitNot" => InstructionCategory::Bitwise,
        "Add" => InstructionCategory::Arithmetic,
        "LoadConstStringLongIndex" => InstructionCategory::ConstantLoad,
        "JmpFalseLong" => InstructionCategory::Jump,
        "JNotLessEqualN" => InstructionCategory::Jump,
        "JGreaterEqual" => InstructionCategory::Jump,
        "Catch" => InstructionCategory::Exception,
        "MovLong" => InstructionCategory::Variable,
        "PutById" => InstructionCategory::PropertyAccess,
        "GetNewTarget" => InstructionCategory::PropertyAccess,
        "GetArgumentsPropByVal" => InstructionCategory::PropertyAccess,
        "JLessEqualNLong" => InstructionCategory::Jump,
        "LoadFromEnvironment" => InstructionCategory::Environment,
        "JNotGreaterLong" => InstructionCategory::Jump,
        "Loadu8" => InstructionCategory::Variable,
        "Call1" => InstructionCategory::Call,
        "Loadi32" => InstructionCategory::Variable,
        "JGreaterEqualNLong" => InstructionCategory::Jump,
        "BitOr" => InstructionCategory::Bitwise,
        "URshift" => InstructionCategory::Bitwise,
        "ThrowIfUndefinedInst" => InstructionCategory::Exception,
        "TypeOf" => InstructionCategory::TypeConversion,
        "ThrowIfEmpty" => InstructionCategory::Exception,
        "JLessEqualN" => InstructionCategory::Jump,
        "StoreNPToEnvironmentL" => InstructionCategory::Logical,
        "CallBuiltinLong" => InstructionCategory::Call,
        "CreateInnerEnvironment" => InstructionCategory::Comparison,
        "ThrowIfHasRestrictedGlobalProperty" => InstructionCategory::Exception,
        "CreateAsyncClosureLongIndex" => InstructionCategory::Comparison,
        "ToNumber" => InstructionCategory::TypeConversion,
        "Construct" => InstructionCategory::Call,
        "Store32" => InstructionCategory::Logical,
        "CreateAsyncClosure" => InstructionCategory::Other,
        "Neq" => InstructionCategory::Comparison,
        "Sub" => InstructionCategory::Arithmetic,
        "TryGetById" => InstructionCategory::PropertyAccess,
        "CoerceThisNS" => InstructionCategory::Other,
        "GetGlobalObject" => InstructionCategory::PropertyAccess,
        "JGreaterEqualN" => InstructionCategory::Jump,
        "LoadConstBigIntLongIndex" => InstructionCategory::ConstantLoad,
        "CallDirectLongIndex" => InstructionCategory::Call,
        "LoadConstString" => InstructionCategory::ConstantLoad,
        "PutOwnGetterSetterByVal" => InstructionCategory::PropertyAccess,
        "PutByIdLong" => InstructionCategory::PropertyAccess,
        "PutNewOwnNEByIdLong" => InstructionCategory::PropertyAccess,
        "Ret" => InstructionCategory::Return,
        "Debugger" => InstructionCategory::Debug,
        "JGreater" => InstructionCategory::Jump,
        "JGreaterLong" => InstructionCategory::Jump,
        "JNotGreaterEqualLong" => InstructionCategory::Jump,
        "Call2" => InstructionCategory::Call,
        "CallDirect" => InstructionCategory::Call,
        "PutNewOwnByIdShort" => InstructionCategory::PropertyAccess,
        "LoadFromEnvironmentL" => InstructionCategory::Environment,
        "GetByVal" => InstructionCategory::PropertyAccess,
        "JNotLessN" => InstructionCategory::Jump,
        "CreateEnvironment" => InstructionCategory::Environment,
        "JNotLessEqualNLong" => InstructionCategory::Jump,
        "JNotGreaterEqualN" => InstructionCategory::Jump,
        "JNotLessLong" => InstructionCategory::Jump,
        "CreateGenerator" => InstructionCategory::Logical,
        _ => InstructionCategory::Other,
    }
}

pub fn is_jump_instruction(instruction_name: &str) -> bool {
    matches!(
        get_category_from_name(instruction_name),
        InstructionCategory::Jump
    )
}

pub fn is_call_instruction(instruction_name: &str) -> bool {
    matches!(
        get_category_from_name(instruction_name),
        InstructionCategory::Call
    )
}

pub fn is_return_instruction(instruction_name: &str) -> bool {
    matches!(
        get_category_from_name(instruction_name),
        InstructionCategory::Return
    )
}

pub fn can_throw_instruction(instruction_name: &str) -> bool {
    matches!(
        get_category_from_name(instruction_name),
        InstructionCategory::Exception
            | InstructionCategory::PropertyAccess
            | InstructionCategory::Arithmetic
            | InstructionCategory::Bitwise
            | InstructionCategory::Logical
            | InstructionCategory::Comparison
            | InstructionCategory::TypeConversion
    )
}

static VERSION_DATA: Lazy<HashMap<u32, HbcVersion>> = Lazy::new(|| {
    let mut map = HashMap::new();
    map.insert(
        51,
        HbcVersion {
            version: 51,
            tag: Some("v0.0.1".to_string()),
            commit: None,
            release_date: None,
        },
    );
    map.insert(
        58,
        HbcVersion {
            version: 58,
            tag: Some("v0.0.3".to_string()),
            commit: None,
            release_date: None,
        },
    );
    map.insert(
        59,
        HbcVersion {
            version: 59,
            tag: Some("v0.1.0".to_string()),
            commit: None,
            release_date: None,
        },
    );
    map.insert(
        61,
        HbcVersion {
            version: 61,
            tag: None,
            commit: Some("ee7a2db".to_string()),
            release_date: Some("2019-08-03".to_string()),
        },
    );
    map.insert(
        62,
        HbcVersion {
            version: 62,
            tag: Some("v0.2.1".to_string()),
            commit: None,
            release_date: Some("2019-08-29".to_string()),
        },
    );
    map.insert(
        68,
        HbcVersion {
            version: 68,
            tag: None,
            commit: Some("883eb4d".to_string()),
            release_date: Some("2019-10-15".to_string()),
        },
    );
    map.insert(
        69,
        HbcVersion {
            version: 69,
            tag: None,
            commit: Some("5a402ac".to_string()),
            release_date: Some("2019-10-15".to_string()),
        },
    );
    map.insert(
        70,
        HbcVersion {
            version: 70,
            tag: None,
            commit: Some("51969f2".to_string()),
            release_date: Some("2019-10-15".to_string()),
        },
    );
    map.insert(
        72,
        HbcVersion {
            version: 72,
            tag: None,
            commit: Some("d1637f2".to_string()),
            release_date: Some("2019-11-26".to_string()),
        },
    );
    map.insert(
        73,
        HbcVersion {
            version: 73,
            tag: None,
            commit: Some("ecded4d".to_string()),
            release_date: Some("2019-12-19".to_string()),
        },
    );
    map.insert(
        80,
        HbcVersion {
            version: 80,
            tag: None,
            commit: Some("e70045d".to_string()),
            release_date: Some("2021-01-13".to_string()),
        },
    );
    map.insert(
        81,
        HbcVersion {
            version: 81,
            tag: None,
            commit: Some("40aa0f7".to_string()),
            release_date: Some("2021-01-14".to_string()),
        },
    );
    map.insert(
        82,
        HbcVersion {
            version: 82,
            tag: None,
            commit: Some("65de349".to_string()),
            release_date: Some("2021-01-26".to_string()),
        },
    );
    map.insert(
        83,
        HbcVersion {
            version: 83,
            tag: Some("v0.8.0".to_string()),
            commit: None,
            release_date: Some("2021-04-29".to_string()),
        },
    );
    map.insert(
        84,
        HbcVersion {
            version: 84,
            tag: Some("v0.9.0".to_string()),
            commit: None,
            release_date: Some("2021-09-02".to_string()),
        },
    );
    map.insert(
        85,
        HbcVersion {
            version: 85,
            tag: Some("v0.11.0".to_string()),
            commit: None,
            release_date: Some("2022-01-27".to_string()),
        },
    );
    map.insert(
        86,
        HbcVersion {
            version: 86,
            tag: None,
            commit: Some("b823515".to_string()),
            release_date: Some("2022-06-28".to_string()),
        },
    );
    map.insert(
        87,
        HbcVersion {
            version: 87,
            tag: None,
            commit: Some("41752c6".to_string()),
            release_date: Some("2022-07-09".to_string()),
        },
    );
    map.insert(
        89,
        HbcVersion {
            version: 89,
            tag: Some("v0.12.0".to_string()),
            commit: None,
            release_date: Some("2022-08-24".to_string()),
        },
    );
    map.insert(
        90,
        HbcVersion {
            version: 90,
            tag: None,
            commit: Some("0763eee".to_string()),
            release_date: Some("2022-10-07".to_string()),
        },
    );
    map.insert(
        92,
        HbcVersion {
            version: 92,
            tag: None,
            commit: Some("b544ff4".to_string()),
            release_date: Some("2023-02-14".to_string()),
        },
    );
    map.insert(
        95,
        HbcVersion {
            version: 95,
            tag: None,
            commit: Some("f6b56d3".to_string()),
            release_date: Some("2023-03-29".to_string()),
        },
    );
    map.insert(
        96,
        HbcVersion {
            version: 96,
            tag: None,
            commit: Some("e0fc671".to_string()),
            release_date: Some("2023-08-16".to_string()),
        },
    );
    map
});

pub static VERSION_REGISTRY: Lazy<VersionRegistry> = Lazy::new(|| {
    let mut registry = VersionRegistry::new();
    for version in VERSION_DATA.values() {
        registry.add_version(version.clone());
    }
    registry
});

pub fn get_version_registry() -> &'static VersionRegistry {
    &VERSION_REGISTRY
}

pub fn is_version_supported(version: u32) -> bool {
    VERSION_REGISTRY.is_supported(version)
}

pub fn supported_versions() -> Vec<u32> {
    VERSION_REGISTRY.versions().map(|v| v.version).collect()
}

pub fn min_supported_version() -> u32 {
    51
}

pub fn max_supported_version() -> u32 {
    96
}
