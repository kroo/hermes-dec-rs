// CFG analysis for cjs_v96
// Generated from data/cjs_v96.hbc

// Function 0
digraph {
    0 [ label = "Block 0 (PC 0-1):\n  0: LoadConstUndefined r0\n" ]
    1 [ label = "Block 1 (PC 1-2):\n  0: Ret               r0\n" ]
    2 [ label = "EXIT" ]
    0 -> 1 [ ]
    1 -> 2 [ ]
}


// Function 1
digraph {
    0 [ label = "Block 0 (PC 0-8):\n  0: CreateEnvironment r1\n  1: LoadParam         r7, 2\n  2: CreateClosure     r3, r1, Function<assert>2\n  3: GetGlobalObject   r2\n  4: GetByIdShort      r0, r2, 1, "print"\n  5: TypeOf            r4, r0\n  6: LoadConstString   r0, "function"\n  7: JStrictEqual      L1, r4, r0\n" ]
    1 [ label = "Block 1 (PC 8-12):\n  0: TryGetById        r4, r2, 2, "global"\n  1: TryGetById        r0, r2, 3, "console"\n  2: GetByIdShort      r0, r0, 4, "log"\n  3: PutById           r4, r0, 1, "print"\n" ]
    2 [ label = "Block 2 (PC 12-58):\n  0: TryGetById        r5, r2, 1, "print"\n  1: LoadConstUndefined r0\n  2: LoadConstString   r4, "Starting Hermes CJS smoke test …"\n  3: Call2             r4, r5, r0, r4\n  4: LoadConstString   r4, "./math"\n  5: Call2             r8, r7, r0, r4\n  6: GetByIdShort      r9, r8, 5, "add"\n  7: LoadConstUInt8    r6, 2\n  8: LoadConstUInt8    r5, 3\n  9: Call3             r10, r9, r8, r6, r5\n  10: LoadConstUInt8    r9, 5\n  11: StrictEq          r10, r10, r9\n  12: LoadConstString   r9, "add() should add"\n  13: Call3             r9, r3, r0, r10, r9\n  14: GetByIdShort      r11, r8, 6, "mul"\n  15: LoadConstUInt8    r10, 6\n  16: LoadConstUInt8    r9, 7\n  17: Call3             r10, r11, r8, r10, r9\n  18: LoadConstUInt8    r9, 42\n  19: StrictEq          r10, r10, r9\n  20: LoadConstString   r9, "mul() should multiply"\n  21: Call3             r9, r3, r0, r10, r9\n  22: Call2             r4, r7, r0, r4\n  23: StrictEq          r8, r4, r8\n  24: LoadConstString   r4, "require cache"\n  25: Call3             r4, r3, r0, r8, r4\n  26: LoadConstString   r4, "path"\n  27: Call2             r8, r7, r0, r4\n  28: TryGetById        r4, r2, 7, "__dirname"\n  29: GetByIdShort      r7, r8, 8, "dirname"\n  30: TryGetById        r2, r2, 9, "__filename"\n  31: Call2             r2, r7, r8, r2\n  32: StrictEq          r4, r4, r2\n  33: LoadConstString   r2, "__dirname works"\n  34: Call3             r2, r3, r0, r4, r2\n  35: CreateClosure     r4, r1, Function<spreadSum>3\n  36: LoadConstUInt8    r15, 1\n  37: LoadConstUInt8    r12, 4\n  38: LoadConstUndefined r16\n  39: Mov               r14, r6\n  40: Mov               r13, r5\n  41: Call              r2, r4, 5\n  42: LoadConstUInt8    r1, 10\n  43: StrictEq          r2, r2, r1\n  44: LoadConstString   r1, "arrow + rest/spread"\n  45: Call3             r1, r3, r0, r2, r1\n" ]
    3 [ label = "Block 3 (PC 58-59):\n  0: Ret               r0\n" ]
    4 [ label = "EXIT" ]
    0 -> 2 [ ]
    0 -> 1 [ ]
    1 -> 2 [ ]
    2 -> 3 [ ]
    3 -> 4 [ ]
}


// Function 2
digraph {
    0 [ label = "Block 0 (PC 0-3):\n  0: LoadParam         r2, 2\n  1: LoadParam         r0, 1\n  2: JmpTrueLong       L1, r0\n" ]
    1 [ label = "Block 1 (PC 3-8):\n  0: GetGlobalObject   r0\n  1: GetByIdShort      r1, r0, 1, "print"\n  2: TypeOf            r1, r1\n  3: LoadConstString   r3, "function"\n  4: JStrictEqual      L2, r1, r3\n" ]
    2 [ label = "Block 2 (PC 8-11):\n  0: TryGetById        r1, r0, 2, "console"\n  1: GetByIdShort      r5, r1, 3, "log"\n  2: Jmp               L3\n" ]
    3 [ label = "Block 3 (PC 11-12):\n  0: TryGetById        r5, r0, 1, "print"\n" ]
    4 [ label = "Block 4 (PC 12-19):\n  0: LoadConstString   r1, "Assertion failed ‑ "\n  1: Add               r1, r1, r2\n  2: LoadConstUndefined r4\n  3: Call2             r1, r5, r4, r1\n  4: GetByIdShort      r1, r0, 4, "quit"\n  5: TypeOf            r1, r1\n  6: JStrictEqual      L4, r1, r3\n" ]
    5 [ label = "Block 5 (PC 19-23):\n  0: GetByIdShort      r1, r0, 5, "process"\n  1: TypeOf            r3, r1\n  2: LoadConstString   r1, "undefined"\n  3: JStrictEqual      L5, r3, r1\n" ]
    6 [ label = "Block 6 (PC 23-28):\n  0: TryGetById        r5, r0, 5, "process"\n  1: GetByIdShort      r3, r5, 6, "exit"\n  2: LoadConstUInt8    r1, 1\n  3: Call2             r1, r3, r5, r1\n  4: Jmp               L5\n" ]
    7 [ label = "Block 7 (PC 28-31):\n  0: TryGetById        r3, r0, 4, "quit"\n  1: LoadConstUInt8    r1, 1\n  2: Call2             r1, r3, r4, r1\n" ]
    8 [ label = "Block 8 (PC 31-38):\n  0: TryGetById        r0, r0, 7, "Error"\n  1: GetByIdShort      r1, r0, 8, "prototype"\n  2: CreateThis        r1, r1, r0\n  3: Mov               r7, r1\n  4: Mov               r6, r2\n  5: Construct         r0, r0, 2\n  6: SelectObject      r0, r1, r0\n" ]
    9 [ label = "Block 9 (PC 38-39):\n  0: Throw             r0\n" ]
    10 [ label = "Block 10 (PC 39-40):\n  0: LoadConstUndefined r0\n" ]
    11 [ label = "Block 11 (PC 40-41):\n  0: Ret               r0\n" ]
    12 [ label = "EXIT" ]
    0 -> 10 [ ]
    0 -> 1 [ ]
    1 -> 3 [ ]
    1 -> 2 [ ]
    2 -> 4 [ ]
    3 -> 4 [ ]
    4 -> 7 [ ]
    4 -> 5 [ ]
    5 -> 8 [ ]
    5 -> 6 [ ]
    6 -> 8 [ ]
    7 -> 8 [ ]
    8 -> 9 [ ]
    9 -> 12 [ ]
    10 -> 11 [ ]
    11 -> 12 [ ]
}


// Function 3
digraph {
    0 [ label = "Block 0 (PC 0-7):\n  0: LoadConstZero     r3\n  1: LoadConstZero     r5\n  2: CallBuiltin       r2, 45, 2\n  3: GetByIdShort      r1, r2, 1, "reduce"\n  4: CreateEnvironment r0\n  5: CreateClosure     r0, r0, Function<>4\n  6: Call3             r0, r1, r2, r0, r3\n" ]
    1 [ label = "Block 1 (PC 7-8):\n  0: Ret               r0\n" ]
    2 [ label = "EXIT" ]
    0 -> 1 [ ]
    1 -> 2 [ ]
}


// Function 4
digraph {
    0 [ label = "Block 0 (PC 0-3):\n  0: LoadParam         r1, 1\n  1: LoadParam         r0, 2\n  2: Add               r0, r1, r0\n" ]
    1 [ label = "Block 1 (PC 3-4):\n  0: Ret               r0\n" ]
    2 [ label = "EXIT" ]
    0 -> 1 [ ]
    1 -> 2 [ ]
}


// Function 5
digraph {
    0 [ label = "Block 0 (PC 0-9):\n  0: CreateEnvironment r0\n  1: CreateClosure     r2, r0, Function<add>7\n  2: LoadParam         r1, 1\n  3: PutById           r1, r2, 1, "add"\n  4: LoadParam         r1, 3\n  5: GetByIdShort      r1, r1, 1, "exports"\n  6: CreateClosure     r0, r0, Function<mul>6\n  7: PutById           r1, r0, 2, "mul"\n  8: LoadConstUndefined r0\n" ]
    1 [ label = "Block 1 (PC 9-10):\n  0: Ret               r0\n" ]
    2 [ label = "EXIT" ]
    0 -> 1 [ ]
    1 -> 2 [ ]
}


// Function 6
digraph {
    0 [ label = "Block 0 (PC 0-3):\n  0: LoadParam         r1, 1\n  1: LoadParam         r0, 2\n  2: Mul               r0, r1, r0\n" ]
    1 [ label = "Block 1 (PC 3-4):\n  0: Ret               r0\n" ]
    2 [ label = "EXIT" ]
    0 -> 1 [ ]
    1 -> 2 [ ]
}


// Function 7
digraph {
    0 [ label = "Block 0 (PC 0-3):\n  0: LoadParam         r1, 1\n  1: LoadParam         r0, 2\n  2: Add               r0, r1, r0\n" ]
    1 [ label = "Block 1 (PC 3-4):\n  0: Ret               r0\n" ]
    2 [ label = "EXIT" ]
    0 -> 1 [ ]
    1 -> 2 [ ]
}


